import styles from "./index.module.css";
import React, { useState, FC, useEffect } from "react";
import { Modal } from "antd";
import { Thongbao } from "../header-nav";
import { Notification } from "../../Data/Notification";
import Cookies from "js-cookie";
import { useRouter } from "next/router";
import axios from "axios";
import cookieCutter from "cookie-cutter";
import { domain } from "../../api/BaseApi";
interface LeftNavIconProps {
  title: string;
  children: any;
  href?: string;
}
const LeftNavIcon: FC<LeftNavIconProps> = ({ title, children, href }) => {
  return (
    <li>
      <div className={styles.hps_icon}>
        {children}
        <a href={href}>{title}</a>
      </div>
    </li>
  );
};
export default function HeadNavRes() {
  const [userInfo, setUserInfo] = useState<any>({});

  const token = cookieCutter.get("token_base365");
  const cp = cookieCutter.get("com_id");
  const ep_id = cookieCutter.get("userID");
  const role = cookieCutter.get("role");
  useEffect(() => {
    axios
      .post(`${domain}/api/tinhluong/nhanvien/qly_ho_so_ca_nhan`, {
        ep_id: ep_id,
        cp: cp,
        token: token,
      })
      .then((response) => {
        console.log(
          "UserInfo ở header",
          response.data.data?.info_dep_com?.user
        );
        setUserInfo(response.data.data);
      })
      .catch((err) => {
        console.log("error ở header", err);
      });
  }, []);
  const router = useRouter();
  function handleLogout() {
    // Clear all cookies by iterating through them
    const cookies = Object.keys(Cookies.get());

    cookies.forEach((cookieName) => {
      Cookies.remove(cookieName);
    });
    console.log("Đã chạy vào hàm handleLogout");
    router.push("/dang-nhap-nhan-vien.html");
    // You might also want to perform any other logout-related actions here
  }

  const [isModalOpen, setIsModalOpen] = useState(false);

  const showModal = () => {
    setIsModalOpen(true);
  };

  const handleOk = () => {
    setIsModalOpen(false);
  };

  const handleCancel = () => {
    setIsModalOpen(false);
  };
  const [IsEdit, setIsEdit] = useState(false);
  return (
    <div>
      <div className={styles.header_hps_res}>
        <div className={styles.hps_res_menu}>
          <img
            src="/tinhluong/menu.png"
            className={styles.img1}
            onClick={showModal}
          />
        </div>
        <div className={styles.hps_res_lg}>
          <a>
            <img src="/tinhluong/logo1.png" className={styles.img1} />
          </a>
        </div>
        <div className={styles.hps_res_nfct}>
          <img
            src="/tinhluong/bell1.png"
            className={styles.img1}
            onClick={() => setIsEdit(!IsEdit)}
          />
          <span className={styles.count_tb}>2</span>
        </div>

        <div
          className={styles.ifr_nfct}
          style={{ display: `${IsEdit ? "block" : "none"}` }}
        >
          <Thongbao
            content_title="Mức lương của bạn đã được thay đổi"
            notification_time="18:44 06/07/2023"
          />
          {Notification.map((item, index) => (
            <Thongbao
              key={index}
              content_title={item.content_title}
              notification_time={item.notification_time}
            />
          ))}
          <p className={styles.nfct_rea}>
            <span className={styles.del_all_tb}>Xóa tất cả thông báo</span>
          </p>
        </div>
      </div>
      <div>
        <Modal
          width={293}
          style={{ top: 70, float: "left", backgroundColor: "white" }}
          open={isModalOpen}
          footer={null}
          onOk={handleOk}
          onCancel={handleCancel}
        >
          <div className={styles.modal_hd_pus}>
            <div className={styles.hps_part_one}>
              <div className={styles.menu_avt}>
                <img
                  src={
                    userInfo?.info_dep_com?.user &&
                    userInfo?.info_dep_com?.user?.avatarUser
                      ? userInfo?.info_dep_com?.user?.avatarUser
                      : "/avatar.jpg"
                  }
                />
                <h4>
                  {role == 1
                    ? userInfo?.info_dep_com?.company.userName
                    : userInfo?.info_dep_com?.user.userName}
                </h4>
              </div>
            </div>
            <div className={styles.hps_part_three}>
              <h3>Quản lý chung</h3>
              <div className={styles.hps_nav}>
                <ul>
                  <li>
                    <div className={styles.hps_icon}>
                      <svg
                        width="18"
                        height="18"
                        viewBox="0 0 18 18"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M17.8117 8.54508L16.5266 7.25996L9.45483 0.188242C9.20381 -0.0627472 8.79683 -0.0627472 8.5458 0.188242L1.47405 7.25996L0.188288 8.54576C-0.0583689 8.80115 -0.0513248 9.20813 0.204071 9.45479C0.453214 9.69542 0.848174 9.69542 1.09732 9.45479L1.28502 9.26576V17.3571C1.28502 17.7122 1.57285 18 1.92792 18H16.0714C16.4265 18 16.7143 17.7122 16.7143 17.3571V9.26576L16.9026 9.45415C17.158 9.7008 17.565 9.69372 17.8117 9.43836C18.0523 9.18922 18.0523 8.79422 17.8117 8.54508ZM10.9283 16.7143H7.07102V11.5711H10.9283V16.7143ZM15.4285 16.7143H12.2141V10.9283C12.2141 10.5732 11.9263 10.2854 11.5712 10.2854H6.42813C6.07306 10.2854 5.78523 10.5732 5.78523 10.9283V16.7143H2.57082V7.98001L8.99964 1.55115L15.4285 7.98001V16.7143Z"
                          fill="#68798B"
                        ></path>
                      </svg>
                      <a href="/tinh-luong/dangnhap/tongquan">Trang chủ</a>
                    </div>
                  </li>
                  <LeftNavIcon
                    href="/tinh-luong/quan-ly/ho-so-ca-nhan"
                    title="Hồ sơ cá nhân"
                  >
                    <svg
                      width="18"
                      height="17"
                      viewBox="0 0 18 17"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M14.7839 8.35499C16.5392 6.77693 16.683 4.07467 15.1049 2.31931C13.6576 0.709349 11.235 0.435843 9.4652 1.68262C7.53586 0.321008 4.86805 0.781246 3.50644 2.71055C2.25705 4.48086 2.52944 6.90592 4.14044 8.35495C2.13874 9.41012 0.889419 11.4904 0.898487 13.7531V15.5882C0.898487 15.926 1.17235 16.1999 1.51019 16.1999H17.4141C17.752 16.1999 18.0259 15.926 18.0259 15.5882V13.7531C18.0349 11.4904 16.7856 9.41012 14.7839 8.35499ZM11.9089 2.131C13.5957 2.12913 14.9646 3.49501 14.9665 5.18177C14.9678 6.38475 14.2629 7.47644 13.1659 7.97019C13.1188 7.99159 13.0717 8.01116 13.024 8.03137C12.8731 8.09227 12.7174 8.14073 12.5585 8.17635C12.5279 8.18309 12.4973 8.18675 12.4662 8.19288C12.2887 8.22689 12.1086 8.2451 11.9279 8.24732C11.8465 8.24732 11.7645 8.24119 11.6832 8.23388C11.6526 8.23388 11.622 8.23388 11.5914 8.22775C11.2437 8.18682 10.9056 8.08714 10.5913 7.93292C10.5797 7.9274 10.5662 7.92801 10.5546 7.92313C10.4934 7.89378 10.4323 7.86808 10.3778 7.83504C10.3827 7.82891 10.3858 7.82221 10.3907 7.81608C10.6711 7.45566 10.8923 7.0528 11.0458 6.62267L11.0647 6.57127C11.1345 6.36583 11.1887 6.15544 11.2268 5.94183C11.2324 5.91064 11.2366 5.88064 11.2415 5.84702C11.2769 5.62958 11.2955 5.40976 11.2972 5.18944C11.2954 4.96956 11.2768 4.75014 11.2415 4.53308C11.2366 4.50129 11.2324 4.4719 11.2268 4.43828C11.1887 4.2247 11.1345 4.01428 11.0647 3.80884L11.0458 3.75744C10.8923 3.32731 10.6711 2.92445 10.3907 2.56403C10.3857 2.5579 10.3827 2.5512 10.3778 2.54507C10.8425 2.27397 11.3709 2.13103 11.9089 2.131ZM3.95693 5.18948C3.95259 3.50472 5.31481 2.13544 6.99957 2.1311C7.7893 2.12906 8.54906 2.43339 9.11901 2.98004C9.15449 3.0143 9.18936 3.04853 9.22359 3.08402C9.32864 3.19408 9.42552 3.31164 9.51355 3.43573C9.54046 3.47365 9.56494 3.51404 9.59 3.55318C9.67548 3.68475 9.75053 3.82281 9.81447 3.96607C9.82977 4.00095 9.84139 4.03643 9.85483 4.07127C9.91931 4.22972 9.97006 4.39344 10.0065 4.56061C10.0108 4.57896 10.0121 4.59731 10.0157 4.61627C10.0932 4.99608 10.0932 5.38765 10.0157 5.76746C10.0121 5.78642 10.0108 5.80477 10.0065 5.82312C9.97009 5.99028 9.91934 6.15401 9.85483 6.31246C9.84139 6.34733 9.82974 6.38282 9.81447 6.41765C9.75046 6.5607 9.67541 6.69854 9.59 6.82994C9.56491 6.86908 9.54046 6.90947 9.51355 6.94739C9.42556 7.07151 9.32864 7.18903 9.22359 7.2991C9.18933 7.33458 9.15445 7.36885 9.11901 7.40308C8.87134 7.63909 8.5858 7.83181 8.27426 7.97317C8.22473 7.99578 8.17455 8.01661 8.1238 8.03435C7.97635 8.09288 7.82463 8.1399 7.66994 8.17503C7.63141 8.18359 7.59163 8.18847 7.55249 8.19521C7.3864 8.22614 7.21799 8.24309 7.04907 8.24599H6.98179C6.81287 8.24313 6.64445 8.22614 6.47836 8.19521C6.43923 8.18847 6.39944 8.18359 6.36091 8.17503C6.20622 8.1399 6.05447 8.09288 5.90705 8.03435C5.85627 8.01417 5.80613 7.99338 5.75659 7.97317C4.66222 7.47906 3.95833 6.3902 3.95693 5.18948ZM11.9089 14.9765H2.12186V13.7532C2.1129 11.6803 3.41888 9.82968 5.37481 9.14346C6.42482 9.58062 7.6059 9.58062 8.65594 9.14346C8.86016 9.21808 9.05919 9.30614 9.25173 9.40711C9.37896 9.47256 9.49642 9.54718 9.61874 9.62241C9.69827 9.67194 9.77899 9.72029 9.85547 9.77473C9.97353 9.85853 10.0849 9.94967 10.1944 10.0433C10.2647 10.1044 10.3344 10.1656 10.4005 10.2268C10.5014 10.3222 10.5962 10.4231 10.6873 10.5265C10.7528 10.6011 10.8164 10.677 10.877 10.7553C10.9571 10.858 11.0336 10.9633 11.1045 11.0715C11.1657 11.1633 11.2202 11.2587 11.274 11.3541C11.3351 11.4593 11.3914 11.5645 11.4428 11.674C11.4942 11.7835 11.5394 11.9034 11.5835 12.0203C11.622 12.1218 11.663 12.2227 11.6948 12.3261C11.7376 12.468 11.7676 12.6148 11.7975 12.7616C11.8159 12.8485 11.8398 12.9335 11.8532 13.0216C11.8894 13.2637 11.908 13.5083 11.9089 13.7532V14.9765H11.9089ZM16.8024 14.9765H13.1323V13.7532C13.1323 13.5617 13.1213 13.3721 13.1042 13.1843C13.0993 13.1292 13.0907 13.0748 13.0846 13.0197C13.0681 12.8845 13.0491 12.7506 13.0234 12.6178C13.0124 12.5612 13.0008 12.5043 12.9885 12.4472C12.9592 12.311 12.9251 12.176 12.8864 12.0422C12.8736 11.9982 12.8619 11.9535 12.8485 11.9101C12.6772 11.3626 12.429 10.8422 12.1114 10.3644L12.0875 10.3295C11.9823 10.1733 11.87 10.0223 11.7505 9.87627L11.7462 9.87075C11.6239 9.71907 11.4911 9.57162 11.3517 9.43216C11.3596 9.43216 11.3682 9.43216 11.3768 9.43216C11.5494 9.45485 11.7232 9.46711 11.8973 9.46886H11.931C12.0921 9.46747 12.253 9.45704 12.413 9.43768C12.4631 9.43155 12.5127 9.42238 12.5629 9.41442C12.693 9.39446 12.8214 9.36854 12.9482 9.33675C12.9843 9.32758 13.021 9.31901 13.0577 9.30862C13.2241 9.26335 13.3876 9.20776 13.5471 9.14224C15.5044 9.82778 16.8116 11.6793 16.8025 13.7532V14.9765H16.8024Z"
                        fill="#68798B"
                      ></path>
                    </svg>
                  </LeftNavIcon>
                  <LeftNavIcon
                    href="/tinh-luong/quan-ly/bang-luong"
                    title="Bảng lương"
                  >
                    <svg
                      width="18"
                      height="15"
                      viewBox="0 0 18 15"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M16.7541 8.40381V11.2021C16.7541 12.4147 13.8308 14.0005 10.2247 14.0005C6.61863 14.0005 3.69531 12.4147 3.69531 11.2021V8.8702"
                        stroke="#68798B"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      ></path>
                      <path
                        d="M3.97266 9.11166C4.77951 10.1825 7.27468 11.1871 10.2278 11.1871C13.8339 11.1871 16.7573 9.68904 16.7573 8.40181C16.7573 7.67891 15.8366 6.88699 14.3917 6.33105"
                        stroke="#68798B"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      ></path>
                      <path
                        d="M13.9573 3.73975V6.53807C13.9573 7.75067 11.034 9.33639 7.42786 9.33639C3.82175 9.33639 0.898438 7.75067 0.898438 6.53807V3.73975"
                        stroke="#68798B"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      ></path>
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M7.42786 6.52313C11.034 6.52313 13.9573 5.02509 13.9573 3.73786C13.9573 2.4497 11.034 0.941406 7.42786 0.941406C3.82175 0.941406 0.898438 2.4497 0.898438 3.73786C0.898438 5.02509 3.82175 6.52313 7.42786 6.52313Z"
                        stroke="#68798B"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      ></path>
                    </svg>
                  </LeftNavIcon>

                  <LeftNavIcon
                    href="/tinh-luong/quan-ly/chamm-cong"
                    title="Chấm công"
                  >
                    <svg
                      width="18"
                      height="18"
                      viewBox="0 0 18 18"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M14.1111 0C15.7066 0 17 1.2934 17 2.88889V13.1111C17 14.7066 15.7066 16 14.1111 16H3.88889C2.2934 16 1 14.7066 1 13.1111V2.88889C1 1.2934 2.2934 0 3.88889 0H14.1111ZM15.6667 4.88889H2.33333V13.1111C2.33333 13.9702 3.02978 14.6667 3.88889 14.6667H14.1111C14.9702 14.6667 15.6667 13.9702 15.6667 13.1111V4.88889ZM5.22222 10.2222C5.83587 10.2222 6.33333 10.7197 6.33333 11.3333C6.33333 11.947 5.83587 12.4444 5.22222 12.4444C4.60857 12.4444 4.11111 11.947 4.11111 11.3333C4.11111 10.7197 4.60857 10.2222 5.22222 10.2222ZM9 10.2222C9.61365 10.2222 10.1111 10.7197 10.1111 11.3333C10.1111 11.947 9.61365 12.4444 9 12.4444C8.38635 12.4444 7.88889 11.947 7.88889 11.3333C7.88889 10.7197 8.38635 10.2222 9 10.2222ZM5.22222 6.66667C5.83587 6.66667 6.33333 7.16413 6.33333 7.77778C6.33333 8.39143 5.83587 8.88889 5.22222 8.88889C4.60857 8.88889 4.11111 8.39143 4.11111 7.77778C4.11111 7.16413 4.60857 6.66667 5.22222 6.66667ZM9 6.66667C9.61365 6.66667 10.1111 7.16413 10.1111 7.77778C10.1111 8.39143 9.61365 8.88889 9 8.88889C8.38635 8.88889 7.88889 8.39143 7.88889 7.77778C7.88889 7.16413 8.38635 6.66667 9 6.66667ZM12.7778 6.66667C13.3914 6.66667 13.8889 7.16413 13.8889 7.77778C13.8889 8.39143 13.3914 8.88889 12.7778 8.88889C12.1641 8.88889 11.6667 8.39143 11.6667 7.77778C11.6667 7.16413 12.1641 6.66667 12.7778 6.66667ZM14.1111 1.33333H3.88889C3.02978 1.33333 2.33333 2.02978 2.33333 2.88889V3.55556H15.6667V2.88889C15.6667 2.02978 14.9702 1.33333 14.1111 1.33333Z"
                        fill="#68798B"
                      ></path>
                    </svg>
                  </LeftNavIcon>
                  <LeftNavIcon
                    href="/van-thu-luu-tru/trang-quan-ly-de-xuat/de-xuat"
                    title="Đề xuất"
                  >
                    <svg
                      width="18"
                      height="16"
                      viewBox="0 0 18 16"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M11.1336 12.2669L10.6896 11.9702C10.7384 11.8972 10.8044 11.8374 10.8819 11.7961C10.9593 11.7547 11.0458 11.7331 11.1336 11.7332V12.2669ZM8.9989 15.4667L9.44291 15.7624C9.39417 15.8355 9.32815 15.8954 9.25069 15.9369C9.17323 15.9783 9.08674 16 8.9989 16C8.91105 16 8.82456 15.9783 8.7471 15.9369C8.66965 15.8954 8.60362 15.8355 8.55488 15.7624L8.9989 15.4667ZM6.86423 12.2669V11.7332C6.95202 11.7331 7.03847 11.7547 7.11592 11.7961C7.19337 11.8374 7.25943 11.8972 7.30824 11.9702L6.86423 12.2669ZM11.5776 12.5625L9.44291 15.7624L8.55488 15.17L10.6896 11.9702L11.5776 12.5625ZM8.55488 15.7624L6.42022 12.5625L7.30824 11.9702L9.44291 15.17L8.55488 15.7624ZM6.86423 12.8005H2.59489V11.7332H6.86423V12.8005ZM2.59489 12.8005C1.71007 12.8005 0.993887 12.0854 0.993887 11.1995H2.06122C2.06122 11.4952 2.29924 11.7332 2.59489 11.7332V12.8005ZM0.993887 11.1995V1.601H2.06122L2.06122 11.2006H0.993887V11.1995ZM0.993887 1.601C0.993887 0.715114 1.71007 0 2.59489 0V1.06733C2.29924 1.06733 2.06122 1.30535 2.06122 1.601H0.993887ZM2.59489 0L15.4029 0V1.06733L2.59489 1.06733V0ZM15.4029 0C16.2877 0 17.0039 0.715114 17.0039 1.601L15.9366 1.601C15.9366 1.30535 15.6986 1.06733 15.4029 1.06733V0ZM17.0039 1.601V11.1995H15.9366L15.9366 1.601L17.0039 1.601ZM17.0039 11.1995C17.0039 12.0854 16.2877 12.8005 15.4029 12.8005V11.7332C15.473 11.7334 15.5425 11.7196 15.6073 11.6929C15.6721 11.6661 15.731 11.6268 15.7806 11.5772C15.8302 11.5276 15.8695 11.4687 15.8962 11.4039C15.923 11.3391 15.9367 11.2697 15.9366 11.1995H17.0039ZM15.4029 12.8005H11.1336V11.7332H15.4029V12.8005ZM9.53256 4.26934V9.60601H8.46523L8.46523 4.26934H9.53256ZM11.6672 7.47134L6.33056 7.47134V6.40401L11.6672 6.40401V7.47134Z"
                        fill="#68798B"
                      ></path>
                    </svg>
                  </LeftNavIcon>
                  <li onClick={handleLogout}>
                    <div className={styles.hps_icon}>
                      <svg
                        width="16"
                        height="16"
                        viewBox="0 0 16 16"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M7.48925 15.5H3.82475C1.99175 15.5 0.5 14.0082 0.5 12.1737V3.827C0.5 1.9925 1.99175 0.5 3.82475 0.5H7.481C9.3155 0.5 10.808 1.9925 10.808 3.827V4.526C10.808 4.8365 10.556 5.0885 10.2455 5.0885C9.935 5.0885 9.683 4.8365 9.683 4.526V3.827C9.683 2.612 8.69525 1.625 7.481 1.625H3.82475C2.612 1.625 1.625 2.612 1.625 3.827V12.1737C1.625 13.388 2.612 14.375 3.82475 14.375H7.48925C8.69825 14.375 9.683 13.391 9.683 12.182V11.4748C9.683 11.1643 9.935 10.9123 10.2455 10.9123C10.556 10.9123 10.808 11.1643 10.808 11.4748V12.182C10.808 14.012 9.3185 15.5 7.48925 15.5Z"
                          fill="#68798B"
                        ></path>
                        <mask
                          id="mask0"
                          mask-type="alpha"
                          maskUnits="userSpaceOnUse"
                          x="5"
                          y="7"
                          width="11"
                          height="2"
                        >
                          <path
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M5.74609 7.4375H15.9018V8.5625H5.74609V7.4375Z"
                            fill="white"
                          ></path>
                        </mask>
                        <g mask="url(#mask0)">
                          <path
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M15.3393 8.5625H6.30859C5.99809 8.5625 5.74609 8.3105 5.74609 8C5.74609 7.6895 5.99809 7.4375 6.30859 7.4375H15.3393C15.6498 7.4375 15.9018 7.6895 15.9018 8C15.9018 8.3105 15.6498 8.5625 15.3393 8.5625Z"
                            fill="#68798B"
                          ></path>
                        </g>
                        <mask
                          id="mask1"
                          mask-type="alpha"
                          maskUnits="userSpaceOnUse"
                          x="12"
                          y="5"
                          width="4"
                          height="6"
                        >
                          <path
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M12.582 5.25146H15.9025V10.7495H12.582V5.25146Z"
                            fill="white"
                          ></path>
                        </mask>
                        <g mask="url(#mask1)">
                          <path
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M13.1443 10.7495C13.0003 10.7495 12.8556 10.6948 12.7461 10.5838C12.5271 10.3633 12.5278 10.0078 12.7476 9.78878L14.5431 8.00003L12.7476 6.21203C12.5278 5.99303 12.5263 5.63753 12.7461 5.41703C12.9651 5.19653 13.3206 5.19653 13.5411 5.41553L15.7371 7.60178C15.8436 7.70678 15.9028 7.85078 15.9028 8.00003C15.9028 8.14928 15.8436 8.29328 15.7371 8.39828L13.5411 10.5853C13.4316 10.6948 13.2876 10.7495 13.1443 10.7495Z"
                            fill="#68798B"
                          ></path>
                        </g>
                      </svg>
                      <a>Đăng xuất</a>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </Modal>
      </div>
      {/* {LeftNavIcon({title:"hello world",children:<></>})} */}
    </div>
  );
}
